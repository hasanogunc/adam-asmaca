<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matematikli Adam Asmaca - S√ºper Versiyon</title>
    <!-- React ve ReactDOM K√ºt√ºphaneleri -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Yazƒ± Tipi -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Konfeti Efekti ƒ∞√ßin -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <style>
        body {
            font-family: 'Fredoka', sans-serif;
            background-color: #f0f9ff;
            user-select: none; /* Metin se√ßimini engelle */
        }
        .animate-pop {
            animation: pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes pop {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .shake {
            animation: shake 0.5s;
        }
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }
        .bounce {
            animation: bounce 1s infinite;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(-5%); }
            50% { transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- SES EFEKTLERƒ∞ (Web Audio API) ---
        const playSound = (type) => {
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            if (!AudioContext) return;
            
            const ctx = new AudioContext();
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            
            osc.connect(gain);
            gain.connect(ctx.destination);

            const now = ctx.currentTime;

            if (type === 'correct') {
                // Mutlu, y√ºkselen ses (Ding!)
                osc.type = 'sine';
                osc.frequency.setValueAtTime(500, now);
                osc.frequency.exponentialRampToValueAtTime(1000, now + 0.1);
                gain.gain.setValueAtTime(0.1, now);
                gain.gain.exponentialRampToValueAtTime(0.01, now + 0.5);
                osc.start(now);
                osc.stop(now + 0.5);
            } else if (type === 'wrong') {
                // √úzg√ºn, d√º≈üen ses (Buzz)
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(200, now);
                osc.frequency.linearRampToValueAtTime(100, now + 0.3);
                gain.gain.setValueAtTime(0.1, now);
                gain.gain.linearRampToValueAtTime(0.01, now + 0.3);
                osc.start(now);
                osc.stop(now + 0.3);
            } else if (type === 'win') {
                // Zafer Melodisi
                const notes = [523.25, 659.25, 783.99, 1046.50]; // C E G C
                notes.forEach((freq, i) => {
                    const osc2 = ctx.createOscillator();
                    const gain2 = ctx.createGain();
                    osc2.connect(gain2);
                    gain2.connect(ctx.destination);
                    osc2.frequency.value = freq;
                    gain2.gain.setValueAtTime(0.1, now + i*0.1);
                    gain2.gain.exponentialRampToValueAtTime(0.01, now + i*0.1 + 0.3);
                    osc2.start(now + i*0.1);
                    osc2.stop(now + i*0.1 + 0.3);
                });
            } else if (type === 'tick') {
                // Saat tiktak
                osc.type = 'square';
                osc.frequency.setValueAtTime(800, now);
                gain.gain.setValueAtTime(0.05, now);
                gain.gain.exponentialRampToValueAtTime(0.01, now + 0.05);
                osc.start(now);
                osc.stop(now + 0.05);
            }
        };

        function App() {
            // --- KATEGORƒ∞Lƒ∞ KELƒ∞ME VERƒ∞LERƒ∞ ---
            const WORD_CATEGORIES = {
                "HAYVANLAR": ["ASLAN", "Z√úRAFA", "KAPLAN", "Fƒ∞L", "PENGUEN", "YUNUS", "KANGURU", "KEDƒ∞", "K√ñPEK", "TAV≈ûAN"],
                "OKUL": ["KALEM", "DEFTER", "Sƒ∞LGƒ∞", "TAHTA", "KANTƒ∞N", "SIRASI", "√áANTA", "Kƒ∞TAP", "√ñDEV", "SINAV"],
                "UZAY": ["GEZEGEN", "YILDIZ", "G√úNE≈û", "METEOR", "ROKET", "UYDU", "MARS", "AY", "GALAKSƒ∞", "ASTRONOT"],
                "SPOR": ["FUTBOL", "BASKETBOL", "VOLEYBOL", "Y√úZME", "TENƒ∞S", "HENTBOL", "G√úRE≈û", "KARATE", "KAYAK", "KO≈ûU"],
                "MEYVE/SEBZE": ["ELMA", "ARMUT", "KARPUZ", "√áƒ∞LEK", "HAVU√á", "PATATES", "DOMATES", "Kƒ∞RAZ", "MUZ", "PORTAKAL"]
            };

            const ALPHABET = "ABC√áDEFGƒûHIƒ∞JKLMNO√ñPRS≈ûTU√úVYZ".split("");

            // --- State Y√∂netimi ---
            const [gameState, setGameState] = useState('menu'); // menu, playing, won, lost
            const [selectedCategory, setSelectedCategory] = useState(null);
            const [currentWord, setCurrentWord] = useState("");
            const [guessedLetters, setGuessedLetters] = useState(new Set());
            const [earnedGuesses, setEarnedGuesses] = useState(0); 
            const [timeLeft, setTimeLeft] = useState(60);
            const [selectedTime, setSelectedTime] = useState(60);
            const [score, setScore] = useState(0);
            const [highScore, setHighScore] = useState(0);
            const [mascotState, setMascotState] = useState('happy'); // happy, sad, thinking, surprised

            // Matematik & Oyun Modu State'leri
            const [mathMode, setMathMode] = useState(false);
            const [mathProblem, setMathProblem] = useState(null);
            const [userAnswer, setUserAnswer] = useState("");
            const [mathFeedback, setMathFeedback] = useState("");
            
            const [guessWordMode, setGuessWordMode] = useState(false);
            const [wordGuessInput, setWordGuessInput] = useState("");
            const [wordGuessFeedback, setWordGuessFeedback] = useState("");

            const timerRef = useRef(null);

            // High Score Y√ºkle
            useEffect(() => {
                const savedScore = localStorage.getItem('mathHangmanHighScore');
                if (savedScore) {
                    setHighScore(parseInt(savedScore));
                }
            }, []);

            // High Score Kaydet
            useEffect(() => {
                if (score > highScore) {
                    setHighScore(score);
                    localStorage.setItem('mathHangmanHighScore', score);
                }
            }, [score]);

            // Maskot Reaksiyonlarƒ±
            const setMascotReaction = (emotion, duration = 2000) => {
                setMascotState(emotion);
                setTimeout(() => setMascotState('happy'), duration);
            };

            // --- Oyun Ba≈ülatma ---
            const startGame = (category) => {
                setSelectedCategory(category);
                const words = WORD_CATEGORIES[category];
                const randomWord = words[Math.floor(Math.random() * words.length)];
                
                setCurrentWord(randomWord);
                setGuessedLetters(new Set());
                setEarnedGuesses(0);
                setTimeLeft(selectedTime);
                setScore(0);
                setMathMode(false);
                setGuessWordMode(false);
                setGameState('playing');
                setMathFeedback("");
                setWordGuessFeedback("");
                setWordGuessInput("");
                setMascotState('happy');
                playSound('correct'); // Ba≈ülangƒ±√ß sesi
            };

            // --- Zamanlayƒ±cƒ± ---
            useEffect(() => {
                if (gameState === 'playing') {
                    timerRef.current = setInterval(() => {
                        setTimeLeft((prev) => {
                            if (prev <= 10 && prev > 0) playSound('tick'); // Son 10 saniye sesli
                            if (prev <= 1) {
                                endGame('lost');
                                return 0;
                            }
                            return prev - 1;
                        });
                    }, 1000);
                }
                return () => clearInterval(timerRef.current);
            }, [gameState]);

            // --- Oyun Biti≈üi ---
            const endGame = (result) => {
                clearInterval(timerRef.current);
                setGameState(result);
                if (result === 'won') {
                    const finalScore = timeLeft * 10;
                    setScore(finalScore);
                    playSound('win');
                    // Konfeti Patlat!
                    confetti({
                        particleCount: 150,
                        spread: 70,
                        origin: { y: 0.6 }
                    });
                    setMascotState('surprised'); // √áok mutlu
                } else {
                    playSound('wrong');
                    setMascotState('sad');
                }
            };

            // --- Matematik Sorusu √úretme (GELƒ∞≈ûMƒ∞≈û) ---
            const generateMathProblem = (difficulty) => {
                let q, a, reward;
                setMascotState('thinking');
                
                if (difficulty === 'easy') {
                    // Toplama / √áƒ±karma
                    const num1 = Math.floor(Math.random() * 40) + 10;
                    const num2 = Math.floor(Math.random() * 20) + 5;
                    if (Math.random() > 0.5) {
                        q = `${num1} + ${num2} = ?`;
                        a = num1 + num2;
                    } else {
                        q = `${num1 + num2} - ${num2} = ?`;
                        a = num1;
                    }
                    reward = 1;
                } else if (difficulty === 'medium') {
                    // √áarpma
                    const num1 = Math.floor(Math.random() * 8) + 2;
                    const num2 = Math.floor(Math.random() * 9) + 2;
                    q = `${num1} x ${num2} = ?`;
                    a = num1 * num2;
                    reward = 2;
                } else { // Hard (B√∂lme Eklendi)
                    const op = Math.random();
                    if (op > 0.5) {
                         // 3 ƒ∞≈ülem
                        const num1 = Math.floor(Math.random() * 20) + 10;
                        const num2 = Math.floor(Math.random() * 10) + 5;
                        const num3 = Math.floor(Math.random() * 10) + 1;
                        q = `${num1} + ${num2} - ${num3} = ?`;
                        a = num1 + num2 - num3;
                    } else {
                        // B√∂lme (Tam b√∂l√ºnen sayƒ±lar)
                        const divisor = Math.floor(Math.random() * 8) + 2; // 2 ile 9 arasƒ±
                        const quotient = Math.floor(Math.random() * 10) + 2; // Cevap
                        const dividend = divisor * quotient;
                        q = `${dividend} √∑ ${divisor} = ?`;
                        a = quotient;
                    }
                    reward = 3;
                }

                setMathProblem({ q, a, reward });
                setMathMode(true);
                setUserAnswer("");
                setMathFeedback("");
            };

            const checkMathAnswer = () => {
                if (parseInt(userAnswer) === mathProblem.a) {
                    setEarnedGuesses(prev => prev + mathProblem.reward);
                    setMathFeedback("correct");
                    playSound('correct');
                    setMascotReaction('happy');
                    setTimeout(() => {
                        setMathMode(false);
                        setMathFeedback("");
                    }, 1000);
                } else {
                    setMathFeedback("wrong");
                    playSound('wrong');
                    setMascotReaction('sad');
                    setTimeout(() => setMathFeedback(""), 1500);
                }
            };

            const guessLetter = (letter) => {
                if (earnedGuesses <= 0) return;

                const newGuessed = new Set(guessedLetters);
                newGuessed.add(letter);
                setGuessedLetters(newGuessed);
                setEarnedGuesses(prev => prev - 1);
                
                // Harf doƒüru mu kontrol et (Maskot tepkisi i√ßin)
                if (currentWord.includes(letter)) {
                    playSound('correct');
                    setMascotReaction('happy');
                } else {
                    playSound('wrong');
                    setMascotReaction('sad');
                }

                const isWin = currentWord.split("").every(char => newGuessed.has(char));
                if (isWin) {
                    endGame('won');
                }
            };

            const checkWordGuess = () => {
                const cleanInput = wordGuessInput.toLocaleUpperCase('tr-TR').trim();
                
                if (cleanInput === currentWord) {
                    endGame('won');
                } else {
                    setWordGuessFeedback("wrong");
                    playSound('wrong');
                    setMascotReaction('sad');
                    setTimeLeft(prev => Math.max(0, prev - 10));
                    setTimeout(() => setWordGuessFeedback(""), 2000);
                }
            };

            // --- MASKOT COMPONENT ---
            const Mascot = ({ state }) => {
                let emoji = "üòä"; // happy
                if (state === 'sad') emoji = "üò¢";
                if (state === 'thinking') emoji = "ü§î";
                if (state === 'surprised') emoji = "ü§©";
                if (state === 'neutral') emoji = "üòê";

                return (
                    <div className="text-6xl sm:text-7xl transition-all transform hover:scale-110 cursor-pointer animate-pop relative">
                         {state === 'thinking' && <span className="absolute -top-4 -right-4 text-3xl animate-bounce">üí≠</span>}
                        {emoji}
                    </div>
                );
            };

            // 1. Ana Men√º
            if (gameState === 'menu') {
                return (
                    <div className="flex flex-col items-center justify-center min-h-screen bg-gradient-to-b from-blue-100 to-blue-200 p-4 font-sans">
                        <div className="bg-white p-8 rounded-3xl shadow-2xl text-center max-w-lg w-full border-b-8 border-blue-500 relative overflow-hidden">
                            {/* High Score Badge */}
                            {highScore > 0 && (
                                <div className="absolute top-4 right-4 bg-yellow-400 text-yellow-900 px-3 py-1 rounded-full text-xs font-bold shadow animate-pulse">
                                    Rekor: {highScore}
                                </div>
                            )}

                            <h1 className="text-4xl font-bold text-blue-600 mb-2 drop-shadow-sm">Matematikli<br/>Adam Asmaca</h1>
                            <div className="text-6xl mb-6 animate-bounce mt-4">ü¶ÅüéìüßÆ</div>
                            
                            <p className="text-gray-600 mb-2 font-bold">√ñnce S√ºreyi Se√ß:</p>
                            <div className="flex flex-wrap gap-2 justify-center mb-6">
                                {[30, 60, 90, 120].map((time) => (
                                    <button
                                        key={time}
                                        onClick={() => setSelectedTime(time)}
                                        className={`px-3 py-2 rounded-xl font-bold transition-all border-b-4 active:border-b-0 active:mt-1 
                                            ${selectedTime === time 
                                                ? 'bg-blue-500 text-white border-blue-700' 
                                                : 'bg-gray-100 text-gray-600 border-gray-300 hover:bg-gray-200'}`}
                                    >
                                        {time}sn
                                    </button>
                                ))}
                            </div>

                            <p className="text-gray-600 mb-2 font-bold">Kategori Se√ß ve Ba≈üla:</p>
                            <div className="grid grid-cols-2 gap-3">
                                {Object.keys(WORD_CATEGORIES).map(cat => (
                                    <button
                                        key={cat}
                                        onClick={() => startGame(cat)}
                                        className="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-xl shadow-lg transform transition active:scale-95 border-b-4 border-green-700 text-sm sm:text-base"
                                    >
                                        {cat}
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            }

            // 2. Oyun Bitti Ekranƒ±
            if (gameState === 'won' || gameState === 'lost') {
                return (
                    <div className="flex flex-col items-center justify-center min-h-screen bg-blue-50 p-4 font-sans">
                        <div className={`p-8 rounded-3xl shadow-2xl text-center max-w-md w-full border-b-8 ${gameState === 'won' ? 'bg-yellow-50 border-yellow-400' : 'bg-red-50 border-red-400'}`}>
                            <div className="text-8xl mb-4 animate-pop">
                                {gameState === 'won' ? 'ü§©' : '‚è∞'}
                            </div>
                            <h2 className={`text-3xl font-bold mb-2 ${gameState === 'won' ? 'text-yellow-600' : 'text-red-600'}`}>
                                {gameState === 'won' ? 'HARƒ∞KASIN!' : 'S√úRE DOLDU!'}
                            </h2>
                            <p className="text-xl text-gray-700 mb-6">
                                {gameState === 'won' ? `M√ºthi≈ü puan topladƒ±n: ${score}` : 'Bir dahaki sefere ba≈üaracaksƒ±n!'}
                            </p>
                            <div className="bg-white p-4 rounded-xl mb-6 border-2 border-dashed border-gray-300">
                                <p className="text-sm text-gray-500 mb-1">Gizli Kelime:</p>
                                <p className="text-3xl font-bold text-gray-800 tracking-widest">{currentWord}</p>
                            </div>
                            <button 
                                onClick={() => setGameState('menu')} 
                                className="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-xl shadow-md transition transform active:scale-95 border-b-4 border-blue-700 active:border-b-0">
                                Ana Men√ºye D√∂n
                            </button>
                        </div>
                    </div>
                );
            }

            // 3. Oyun Ekranƒ±
            return (
                <div className="min-h-screen bg-slate-100 flex flex-col items-center p-4 font-sans relative">
                    
                    {/* √úst Bilgi √áubuƒüu */}
                    <div className="w-full max-w-3xl flex justify-between items-center bg-white p-3 sm:p-4 rounded-2xl shadow-sm mb-4 border-b-4 border-slate-200">
                        {/* Sol: Maskot ve Kategori */}
                        <div className="flex items-center gap-3">
                            <Mascot state={mascotState} />
                            <div className="hidden sm:block">
                                <span className="text-xs text-slate-400 font-bold block">KATEGORƒ∞</span>
                                <span className="text-sm sm:text-lg font-bold text-blue-600">{selectedCategory}</span>
                            </div>
                        </div>

                        {/* Orta: S√ºre */}
                        <div className="flex flex-col items-center">
                            <span className="text-xs text-slate-400 font-bold">S√úRE</span>
                            <span className={`text-2xl sm:text-3xl font-black ${timeLeft < 10 ? 'text-red-500 animate-pulse' : 'text-slate-700'}`}>
                                {timeLeft}
                            </span>
                        </div>

                        {/* Saƒü: Hak */}
                        <div className="flex flex-col items-end">
                             <span className="text-xs text-slate-400 font-bold">HAK</span>
                            <div className="bg-blue-100 px-3 py-1 rounded-lg border-2 border-blue-200">
                                <span className="font-bold text-blue-700 text-xl">{earnedGuesses}</span>
                            </div>
                        </div>
                    </div>

                    {/* Kelime Alanƒ± */}
                    <div className="mb-6 sm:mb-8 flex flex-wrap justify-center gap-2 px-2">
                        {currentWord.split("").map((char, index) => (
                            <div key={index} className={`w-10 h-12 sm:w-14 sm:h-16 flex items-center justify-center text-2xl sm:text-4xl font-bold rounded-xl shadow-sm border-b-4 transition-all duration-300
                                ${guessedLetters.has(char) 
                                    ? 'bg-white text-slate-800 border-slate-300 animate-pop transform -translate-y-1' 
                                    : 'bg-slate-200 text-transparent border-slate-300'}`}>
                                {guessedLetters.has(char) ? char : '_'}
                            </div>
                        ))}
                    </div>

                    {/* Alt Kontrol Alanƒ± */}
                    <div className="w-full max-w-3xl bg-white rounded-3xl shadow-lg p-4 sm:p-6 border-b-8 border-slate-200 min-h-[320px] flex flex-col justify-center relative transition-all">
                        
                        {/* DURUM 1: Soru √á√∂zme Modu */}
                        {mathMode ? (
                            <div className="text-center animate-pop">
                                <h3 className="text-xl sm:text-2xl font-bold text-slate-600 mb-4">Soruyu √á√∂z, Hakkƒ± Kap!</h3>
                                <div className="bg-orange-50 p-4 sm:p-6 rounded-2xl inline-block mb-6 border-2 border-orange-200 shadow-inner">
                                    <span className="text-3xl sm:text-5xl font-black text-orange-600 tracking-wide font-mono">{mathProblem.q}</span>
                                </div>
                                
                                {mathFeedback === "correct" ? (
                                    <div className="text-green-500 text-3xl font-bold mb-4 animate-bounce">DOƒûRU! üéâ</div>
                                ) : mathFeedback === "wrong" ? (
                                    <div className="text-red-500 text-3xl font-bold mb-4 shake">YANLI≈û üòî</div>
                                ) : (
                                    <div className="flex flex-col sm:flex-row justify-center items-center gap-3 mb-4">
                                        <input 
                                            type="number" 
                                            value={userAnswer}
                                            onChange={(e) => setUserAnswer(e.target.value)}
                                            onKeyDown={(e) => e.key === 'Enter' && checkMathAnswer()}
                                            className="w-full sm:w-32 text-center text-3xl p-2 border-2 border-slate-300 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-200"
                                            placeholder="?"
                                            autoFocus
                                        />
                                        <button 
                                            onClick={checkMathAnswer}
                                            className="w-full sm:w-auto bg-green-500 hover:bg-green-600 text-white font-bold px-8 py-3 rounded-xl text-xl shadow border-b-4 border-green-700 active:mt-1 active:border-b-0">
                                            Kontrol Et
                                        </button>
                                    </div>
                                )}
                                <button onClick={() => { setMathMode(false); setMascotState('happy'); }} className="text-slate-400 underline mt-2 hover:text-slate-600">Vazge√ß</button>
                            </div>
                        ) : 
                        
                        /* DURUM 2: Kelime Tahmin Modu */
                        guessWordMode ? (
                            <div className="text-center animate-pop">
                                <h3 className="text-2xl font-bold text-purple-600 mb-2">Kelimeyi Tahmin Et</h3>
                                <p className="text-purple-400 text-sm mb-4">Dikkat: Yanlƒ±≈ü tahmin -10 saniye!</p>
                                
                                {wordGuessFeedback === "wrong" && (
                                     <div className="mb-4 text-red-500 font-bold text-lg bg-red-100 p-2 rounded-lg inline-block shake">
                                        YANLI≈û! üò¨
                                    </div>
                                )}

                                <div className="flex flex-col items-center gap-4 mb-4">
                                    <input 
                                        type="text" 
                                        value={wordGuessInput}
                                        onChange={(e) => setWordGuessInput(e.target.value)}
                                        onKeyDown={(e) => e.key === 'Enter' && checkWordGuess()}
                                        className="w-full max-w-md text-center text-3xl p-3 border-2 border-purple-300 rounded-xl focus:outline-none focus:border-purple-500 uppercase tracking-widest placeholder-purple-200"
                                        placeholder="KELƒ∞MEYƒ∞ YAZ"
                                        autoFocus
                                    />
                                    <button 
                                        onClick={checkWordGuess}
                                        className="bg-purple-500 hover:bg-purple-600 text-white font-bold px-8 py-3 rounded-xl text-xl shadow border-b-4 border-purple-700 active:mt-1 active:border-b-0 w-full max-w-xs">
                                        TAHMƒ∞N ET
                                    </button>
                                </div>
                                <button onClick={() => { setGuessWordMode(false); setWordGuessFeedback(""); setMascotState('happy'); }} className="text-slate-400 underline mt-2 hover:text-slate-600">Vazge√ß</button>
                            </div>
                        ) :

                        /* DURUM 3: Harf Tahmin Hakkƒ± VARSA -> Klavye G√∂ster */
                        earnedGuesses > 0 ? (
                            <div>
                                <h3 className="text-center text-green-600 font-bold mb-4 text-lg sm:text-xl flex items-center justify-center gap-2">
                                    <span className="animate-bounce">üëá</span> Hadi bir harf se√ß! 
                                    <span className="bg-green-100 px-2 py-0.5 rounded text-green-800 text-sm">{earnedGuesses} hakkƒ±n var</span>
                                </h3>
                                <div className="grid grid-cols-7 sm:grid-cols-10 gap-1 sm:gap-2 mb-4">
                                    {ALPHABET.map((letter) => {
                                        const isUsed = guessedLetters.has(letter);
                                        return (
                                            <button
                                                key={letter}
                                                disabled={isUsed}
                                                onClick={() => guessLetter(letter)}
                                                className={`aspect-square font-bold text-lg rounded-lg shadow transition-all duration-200
                                                    ${isUsed 
                                                        ? 'bg-gray-100 text-gray-300 cursor-not-allowed border-gray-200' 
                                                        : 'bg-blue-50 text-blue-600 hover:bg-blue-500 hover:text-white border-b-4 border-blue-200 hover:border-blue-700 active:border-b-0 active:mt-1'
                                                    }`}
                                            >
                                                {letter}
                                            </button>
                                        );
                                    })}
                                </div>
                                <div className="flex justify-center border-t pt-4 border-slate-100">
                                     <button 
                                        onClick={() => { setGuessWordMode(true); setMascotState('thinking'); }}
                                        className="text-purple-600 font-bold bg-purple-50 hover:bg-purple-100 px-6 py-2 rounded-full transition-colors flex items-center gap-2 border-2 border-purple-200">
                                        üí° Kelimeyi Biliyorum!
                                    </button>
                                </div>
                            </div>
                        ) :
                        
                        /* DURUM 4: Harf Hakkƒ± YOKSA -> Zorluk Se√ßimi */
                        (
                            <div className="text-center animate-pop">
                                <div className="text-5xl mb-2">üîê</div>
                                <h3 className="text-2xl font-bold text-slate-700 mb-1">Harf hakkƒ±n bitti!</h3>
                                <p className="text-slate-500 mb-6">Harf kazanmak i√ßin bir soru zorluƒüu se√ß:</p>
                                
                                <div className="grid grid-cols-1 sm:grid-cols-3 gap-3 mb-6">
                                    <button 
                                        onClick={() => generateMathProblem('easy')}
                                        className="group relative flex flex-col items-center bg-green-50 hover:bg-green-100 p-3 rounded-xl border-2 border-green-400 transition-all hover:-translate-y-1 active:scale-95">
                                        <div className="font-black text-2xl text-green-600 mb-1">KOLAY</div>
                                        <div className="text-xs text-green-700 font-bold bg-green-200 px-2 py-1 rounded">Toplama/√áƒ±karma</div>
                                        <div className="mt-2 font-bold text-green-800">+1 HARF</div>
                                    </button>

                                    <button 
                                        onClick={() => generateMathProblem('medium')}
                                        className="group relative flex flex-col items-center bg-yellow-50 hover:bg-yellow-100 p-3 rounded-xl border-2 border-yellow-400 transition-all hover:-translate-y-1 active:scale-95">
                                        <div className="font-black text-2xl text-yellow-600 mb-1">ORTA</div>
                                        <div className="text-xs text-yellow-700 font-bold bg-yellow-200 px-2 py-1 rounded">√áarpma</div>
                                        <div className="mt-2 font-bold text-yellow-800">+2 HARF</div>
                                    </button>

                                    <button 
                                        onClick={() => generateMathProblem('hard')}
                                        className="group relative flex flex-col items-center bg-red-50 hover:bg-red-100 p-3 rounded-xl border-2 border-red-400 transition-all hover:-translate-y-1 active:scale-95">
                                        <div className="font-black text-2xl text-red-600 mb-1">ZOR</div>
                                        <div className="text-xs text-red-700 font-bold bg-red-200 px-2 py-1 rounded">Karƒ±≈üƒ±k/B√∂lme</div>
                                        <div className="mt-2 font-bold text-red-800">+3 HARF</div>
                                    </button>
                                </div>
                                 <div className="flex justify-center border-t pt-4 border-slate-100">
                                     <button 
                                        onClick={() => { setGuessWordMode(true); setMascotState('thinking'); }}
                                        className="text-purple-600 font-bold bg-purple-50 hover:bg-purple-100 px-6 py-2 rounded-full transition-colors flex items-center gap-2 border-2 border-purple-200">
                                        üí° Kelimeyi Biliyorum!
                                    </button>
                                </div>
                            </div>
                        )}
                        
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
