<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matematikli Adam Asmaca</title>
    <!-- React ve ReactDOM K√ºt√ºphaneleri -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel (Kodu tarayƒ±cƒ±nƒ±n anlamasƒ± i√ßin √ßevirici) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Tailwind CSS (Tasarƒ±m i√ßin) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Yazƒ± Tipi -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Fredoka', sans-serif;
            background-color: #f0f9ff;
        }
        .animate-pop {
            animation: pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes pop {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .shake {
            animation: shake 0.5s;
        }
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        function App() {
            // --- Oyun Verileri ---
            const WORDS = [
                "Bƒ∞LGƒ∞SAYAR", "K√úT√úPHANE", "MATEMATƒ∞K", "CUMHURƒ∞YET", 
                "√ñƒûRETMEN", "TELEVƒ∞ZYON", "Dƒ∞NOZOR", "G√ñKY√úZ√ú", 
                "ASTRONOT", "SANDALYE", "KARPUZ", "DEPREM", 
                "Mƒ∞KROSKOP", "LABORATUVAR", "GEZEGEN", "FUTBOL"
            ];

            const ALPHABET = "ABC√áDEFGƒûHIƒ∞JKLMNO√ñPRS≈ûTU√úVYZ".split("");

            // --- State Y√∂netimi ---
            const [gameState, setGameState] = useState('menu'); // menu, playing, won, lost
            const [currentWord, setCurrentWord] = useState("");
            const [guessedLetters, setGuessedLetters] = useState(new Set());
            const [earnedGuesses, setEarnedGuesses] = useState(0); // Kazanƒ±lan harf tahmin hakkƒ±
            const [timeLeft, setTimeLeft] = useState(60);
            const [selectedTime, setSelectedTime] = useState(60); // Varsayƒ±lan s√ºre 60sn
            const [score, setScore] = useState(0);
            
            // Matematik Modu State'leri
            const [mathMode, setMathMode] = useState(false); // Soru √ß√∂z√ºyor mu?
            const [mathProblem, setMathProblem] = useState(null);
            const [userAnswer, setUserAnswer] = useState("");
            const [mathFeedback, setMathFeedback] = useState(""); // Doƒüru/Yanlƒ±≈ü mesajƒ±

            // Kelime Tahmin Modu State'leri
            const [guessWordMode, setGuessWordMode] = useState(false);
            const [wordGuessInput, setWordGuessInput] = useState("");
            const [wordGuessFeedback, setWordGuessFeedback] = useState(""); // "" | "wrong"

            const timerRef = useRef(null);

            // --- Oyun Ba≈ülatma ---
            const startGame = () => {
                const randomWord = WORDS[Math.floor(Math.random() * WORDS.length)];
                setCurrentWord(randomWord);
                setGuessedLetters(new Set());
                setEarnedGuesses(0); // Ba≈ülangƒ±√ßta 0 hak
                setTimeLeft(selectedTime); // Se√ßilen s√ºreyi ayarla
                setScore(0);
                setMathMode(false);
                setGuessWordMode(false);
                setGameState('playing');
                setMathFeedback("");
                setWordGuessFeedback("");
                setWordGuessInput("");
            };

            // --- Zamanlayƒ±cƒ± ---
            useEffect(() => {
                if (gameState === 'playing') {
                    timerRef.current = setInterval(() => {
                        setTimeLeft((prev) => {
                            if (prev <= 1) {
                                endGame('lost');
                                return 0;
                            }
                            return prev - 1;
                        });
                    }, 1000);
                }
                return () => clearInterval(timerRef.current);
            }, [gameState]);

            // --- Oyun Biti≈üi ---
            const endGame = (result) => {
                clearInterval(timerRef.current);
                setGameState(result);
                if (result === 'won') {
                    // Puan hesabƒ±: Kalan s√ºre x 10
                    setScore(timeLeft * 10);
                }
            };

            // --- Matematik Sorusu √úretme ---
            const generateMathProblem = (difficulty) => {
                let q, a, reward;
                
                // ƒ∞lkokul 4-5 Seviyesi
                if (difficulty === 'easy') {
                    // Toplama / √áƒ±karma (0-50 arasƒ±)
                    const num1 = Math.floor(Math.random() * 40) + 10;
                    const num2 = Math.floor(Math.random() * 20) + 5;
                    if (Math.random() > 0.5) {
                        q = `${num1} + ${num2} = ?`;
                        a = num1 + num2;
                    } else {
                        q = `${num1 + num2} - ${num2} = ?`; // Sonu√ß negatif √ßƒ±kmasƒ±n diye
                        a = num1;
                    }
                    reward = 1;
                } else if (difficulty === 'medium') {
                    // √áarpƒ±m Tablosu veya Zor Toplama
                    const num1 = Math.floor(Math.random() * 8) + 2;
                    const num2 = Math.floor(Math.random() * 9) + 2;
                    q = `${num1} x ${num2} = ?`;
                    a = num1 * num2;
                    reward = 2;
                } else { // Hard
                    // 3 ƒ∞≈ülem veya B√ºy√ºk Sayƒ±lar
                    const num1 = Math.floor(Math.random() * 20) + 10;
                    const num2 = Math.floor(Math.random() * 10) + 5;
                    const num3 = Math.floor(Math.random() * 10) + 1;
                    // √ñrn: 20 + 10 - 5
                    q = `${num1} + ${num2} - ${num3} = ?`;
                    a = num1 + num2 - num3;
                    reward = 3;
                }

                setMathProblem({ q, a, reward });
                setMathMode(true);
                setUserAnswer("");
                setMathFeedback("");
            };

            // --- Matematik Cevap Kontrol√º ---
            const checkMathAnswer = () => {
                if (parseInt(userAnswer) === mathProblem.a) {
                    setEarnedGuesses(prev => prev + mathProblem.reward);
                    setMathFeedback("correct");
                    setTimeout(() => {
                        setMathMode(false);
                        setMathFeedback("");
                    }, 1000);
                } else {
                    setMathFeedback("wrong");
                    setTimeout(() => setMathFeedback(""), 1500);
                }
            };

            // --- Harf Tahmini ---
            const guessLetter = (letter) => {
                if (earnedGuesses <= 0) return;

                const newGuessed = new Set(guessedLetters);
                newGuessed.add(letter);
                setGuessedLetters(newGuessed);
                
                // Hakkƒ± azalt
                setEarnedGuesses(prev => prev - 1);

                // Kazanma kontrol√º
                const isWin = currentWord.split("").every(char => newGuessed.has(char));
                if (isWin) {
                    endGame('won');
                }
            };

            // --- Kelime Tahmini ---
            const checkWordGuess = () => {
                // T√ºrk√ße karakter uyumlu b√ºy√ºk harfe √ßevirme
                const cleanInput = wordGuessInput.toLocaleUpperCase('tr-TR').trim();
                
                if (cleanInput === currentWord) {
                    endGame('won');
                } else {
                    setWordGuessFeedback("wrong");
                    // Yanlƒ±≈ü tahminde ceza olarak s√ºreden d√º≈ü
                    setTimeLeft(prev => Math.max(0, prev - 10));
                    setTimeout(() => setWordGuessFeedback(""), 2000);
                }
            };

            // 1. Ana Men√º
            if (gameState === 'menu') {
                return (
                    <div className="flex flex-col items-center justify-center min-h-screen bg-blue-100 p-4 font-sans">
                        <div className="bg-white p-8 rounded-3xl shadow-xl text-center max-w-md w-full border-b-8 border-blue-400">
                            <h1 className="text-4xl font-bold text-blue-600 mb-2">Matematikli<br/>Adam Asmaca</h1>
                            <div className="text-6xl mb-6">üßÆüî§</div>
                            <p className="text-gray-600 mb-6 text-lg">
                                Sorularƒ± √ß√∂z, harf haklarƒ±nƒ± kazan, kelimeyi bul!
                            </p>
                            
                            {/* S√ºre Se√ßimi */}
                            <div className="mb-8">
                                <p className="text-gray-600 mb-3 font-bold">S√ºre Se√ßimi:</p>
                                <div className="flex flex-wrap gap-2 justify-center">
                                    {[30, 60, 90, 120].map((time) => (
                                        <button
                                            key={time}
                                            onClick={() => setSelectedTime(time)}
                                            className={`px-4 py-2 rounded-xl font-bold transition-all border-2 
                                                ${selectedTime === time 
                                                    ? 'bg-blue-500 text-white border-blue-600 shadow-md scale-105' 
                                                    : 'bg-white text-blue-500 border-blue-200 hover:bg-blue-50'}`}
                                        >
                                            {time} sn
                                        </button>
                                    ))}
                                </div>
                            </div>

                            <button 
                                onClick={startGame}
                                className="w-full bg-green-500 hover:bg-green-600 text-white text-2xl font-bold py-4 px-8 rounded-2xl shadow-lg transform transition active:scale-95 border-b-4 border-green-700">
                                OYUNA BA≈ûLA
                            </button>
                        </div>
                    </div>
                );
            }

            // 2. Oyun Bitti Ekranƒ±
            if (gameState === 'won' || gameState === 'lost') {
                return (
                    <div className="flex flex-col items-center justify-center min-h-screen bg-blue-50 p-4 font-sans">
                        <div className={`p-8 rounded-3xl shadow-2xl text-center max-w-md w-full border-b-8 ${gameState === 'won' ? 'bg-yellow-50 border-yellow-400' : 'bg-red-50 border-red-400'}`}>
                            <div className="text-6xl mb-4">
                                {gameState === 'won' ? 'üèÜ' : '‚è∞'}
                            </div>
                            <h2 className={`text-3xl font-bold mb-2 ${gameState === 'won' ? 'text-yellow-600' : 'text-red-600'}`}>
                                {gameState === 'won' ? 'TEBRƒ∞KLER!' : 'S√úRE DOLDU!'}
                            </h2>
                            <p className="text-xl text-gray-700 mb-6">
                                {gameState === 'won' ? `Harika i≈ü √ßƒ±kardƒ±n! Puanƒ±n: ${score}` : 'Bir dahaki sefere ba≈üarabilirsin.'}
                            </p>
                            <div className="bg-white p-4 rounded-xl mb-6 border-2 border-dashed border-gray-300">
                                <p className="text-sm text-gray-500 mb-1">Doƒüru Kelime:</p>
                                <p className="text-3xl font-bold text-gray-800 tracking-widest">{currentWord}</p>
                            </div>
                            <button 
                                onClick={() => setGameState('menu')} 
                                className="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-xl shadow-md transition transform active:scale-95">
                                Ana Men√ºye D√∂n
                            </button>
                        </div>
                    </div>
                );
            }

            // 3. Oyun Ekranƒ±
            return (
                <div className="min-h-screen bg-slate-100 flex flex-col items-center p-4 font-sans">
                    
                    {/* √úst Bilgi √áubuƒüu */}
                    <div className="w-full max-w-3xl flex justify-between items-center bg-white p-4 rounded-2xl shadow-sm mb-6 border-b-4 border-slate-200">
                        <div className="flex items-center gap-2">
                            <span className="text-2xl">‚è±Ô∏è</span>
                            <span className={`text-2xl font-bold ${timeLeft < 10 ? 'text-red-500 animate-pulse' : 'text-slate-700'}`}>
                                {timeLeft} sn
                            </span>
                        </div>
                        <div className="flex items-center gap-2 bg-blue-100 px-4 py-2 rounded-lg">
                            <span className="text-xl">üîê</span>
                            <span className="font-bold text-blue-700">
                                {earnedGuesses > 0 ? `${earnedGuesses} Hak` : 'Hakkƒ±n Bitti!'}
                            </span>
                        </div>
                    </div>

                    {/* Kelime Alanƒ± */}
                    <div className="mb-8 flex flex-wrap justify-center gap-2">
                        {currentWord.split("").map((char, index) => (
                            <div key={index} className={`w-12 h-14 sm:w-16 sm:h-20 flex items-center justify-center text-3xl sm:text-4xl font-bold rounded-xl shadow-sm border-b-4 
                                ${guessedLetters.has(char) ? 'bg-white text-slate-800 border-slate-300 animate-pop' : 'bg-slate-200 text-transparent border-slate-300'}`}>
                                {guessedLetters.has(char) ? char : '_'}
                            </div>
                        ))}
                    </div>

                    {/* Alt Kontrol Alanƒ± (Deƒüi≈üken) */}
                    <div className="w-full max-w-3xl bg-white rounded-3xl shadow-lg p-6 border-b-8 border-slate-200 min-h-[300px] flex flex-col justify-center relative">
                        
                        {/* DURUM 1: Soru √á√∂zme Modu */}
                        {mathMode ? (
                            <div className="text-center animate-pop">
                                <h3 className="text-2xl font-bold text-slate-600 mb-4">Soruyu √á√∂z, Hakkƒ± Kap!</h3>
                                <div className="bg-orange-100 p-6 rounded-2xl inline-block mb-6 border-2 border-orange-200">
                                    <span className="text-4xl font-bold text-orange-800 tracking-wide">{mathProblem.q}</span>
                                </div>
                                
                                {mathFeedback === "correct" ? (
                                    <div className="text-green-500 text-3xl font-bold mb-4">DOƒûRU! üéâ</div>
                                ) : mathFeedback === "wrong" ? (
                                    <div className="text-red-500 text-3xl font-bold mb-4">YANLI≈û, TEKRAR DENE üòî</div>
                                ) : (
                                    <div className="flex justify-center gap-2 mb-4">
                                        <input 
                                            type="number" 
                                            value={userAnswer}
                                            onChange={(e) => setUserAnswer(e.target.value)}
                                            onKeyDown={(e) => e.key === 'Enter' && checkMathAnswer()}
                                            className="w-32 text-center text-3xl p-2 border-2 border-slate-300 rounded-xl focus:outline-none focus:border-blue-500"
                                            autoFocus
                                        />
                                        <button 
                                            onClick={checkMathAnswer}
                                            className="bg-green-500 hover:bg-green-600 text-white font-bold px-6 py-2 rounded-xl text-xl shadow border-b-4 border-green-700 active:mt-1 active:border-b-0">
                                            Kontrol Et
                                        </button>
                                    </div>
                                )}
                                <button onClick={() => setMathMode(false)} className="text-slate-400 underline mt-4">Vazge√ß / Soru Deƒüi≈ütir</button>
                            </div>
                        ) : 
                        
                        /* DURUM 2: Kelime Tahmin Modu */
                        guessWordMode ? (
                            <div className="text-center animate-pop">
                                <h3 className="text-2xl font-bold text-purple-600 mb-4">Kelimeyi Tahmin Et</h3>
                                
                                {wordGuessFeedback === "wrong" && (
                                     <div className="mb-4 text-red-500 font-bold animate-pulse text-lg bg-red-100 p-2 rounded-lg inline-block shake">
                                        YANLI≈û! -10 Saniye Ceza! üò¨
                                    </div>
                                )}

                                <div className="flex flex-col items-center gap-4 mb-4">
                                    <input 
                                        type="text" 
                                        value={wordGuessInput}
                                        onChange={(e) => setWordGuessInput(e.target.value)}
                                        onKeyDown={(e) => e.key === 'Enter' && checkWordGuess()}
                                        className="w-full max-w-md text-center text-3xl p-3 border-2 border-purple-300 rounded-xl focus:outline-none focus:border-purple-500 uppercase tracking-widest"
                                        placeholder="Kelimeyi yazƒ±n..."
                                        autoFocus
                                    />
                                    <button 
                                        onClick={checkWordGuess}
                                        className="bg-purple-500 hover:bg-purple-600 text-white font-bold px-8 py-3 rounded-xl text-xl shadow border-b-4 border-purple-700 active:mt-1 active:border-b-0 w-full max-w-xs">
                                        TAHMƒ∞N ET
                                    </button>
                                </div>
                                <button onClick={() => { setGuessWordMode(false); setWordGuessFeedback(""); }} className="text-slate-400 underline mt-2">Vazge√ß</button>
                            </div>
                        ) :

                        /* DURUM 3: Harf Tahmin Hakkƒ± VARSA -> Klavye G√∂ster */
                        earnedGuesses > 0 ? (
                            <div>
                                <h3 className="text-center text-green-600 font-bold mb-4 text-xl">
                                    Hadi bir harf se√ß! ({earnedGuesses} hakkƒ±n kaldƒ±)
                                </h3>
                                <div className="grid grid-cols-7 gap-2 sm:gap-3 mb-6">
                                    {ALPHABET.map((letter) => {
                                        const isUsed = guessedLetters.has(letter);
                                        return (
                                            <button
                                                key={letter}
                                                disabled={isUsed}
                                                onClick={() => guessLetter(letter)}
                                                className={`aspect-square font-bold text-lg sm:text-xl rounded-lg shadow transition-all
                                                    ${isUsed 
                                                        ? 'bg-gray-200 text-gray-400 cursor-not-allowed' 
                                                        : 'bg-blue-100 text-blue-700 hover:bg-blue-200 hover:scale-105 active:scale-95 border-b-4 border-blue-200 active:border-b-0'
                                                    }`}
                                            >
                                                {letter}
                                            </button>
                                        );
                                    })}
                                </div>
                                <div className="flex justify-center border-t pt-4 border-slate-100">
                                     <button 
                                        onClick={() => setGuessWordMode(true)}
                                        className="text-purple-600 font-bold hover:bg-purple-50 px-4 py-2 rounded-lg transition-colors flex items-center gap-2">
                                        üí° Kelimeyi Biliyorum!
                                    </button>
                                </div>
                            </div>
                        ) :
                        
                        /* DURUM 4: Harf Hakkƒ± YOKSA -> Zorluk Se√ßimi */
                        (
                            <div className="text-center">
                                <div className="text-5xl mb-4">ü§î</div>
                                <h3 className="text-2xl font-bold text-slate-700 mb-2">Harf hakkƒ±n bitti!</h3>
                                <p className="text-slate-500 mb-6">Harf kazanmak i√ßin bir soru zorluƒüu se√ß:</p>
                                
                                <div className="flex flex-col sm:flex-row gap-4 justify-center mb-6">
                                    <button 
                                        onClick={() => generateMathProblem('easy')}
                                        className="group relative flex flex-col items-center bg-green-100 hover:bg-green-200 p-4 rounded-xl border-2 border-green-300 w-full sm:w-1/3 transition-all hover:-translate-y-1">
                                        <span className="text-green-700 font-bold text-xl">KOLAY</span>
                                        <span className="text-green-600 text-sm">Toplama/√áƒ±karma</span>
                                        <div className="mt-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full">+1 Harf</div>
                                    </button>

                                    <button 
                                        onClick={() => generateMathProblem('medium')}
                                        className="group relative flex flex-col items-center bg-yellow-100 hover:bg-yellow-200 p-4 rounded-xl border-2 border-yellow-300 w-full sm:w-1/3 transition-all hover:-translate-y-1">
                                        <span className="text-yellow-700 font-bold text-xl">ORTA</span>
                                        <span className="text-yellow-600 text-sm">√áarpƒ±m Tablosu</span>
                                        <div className="mt-2 bg-yellow-500 text-white text-xs px-2 py-1 rounded-full">+2 Harf</div>
                                    </button>

                                    <button 
                                        onClick={() => generateMathProblem('hard')}
                                        className="group relative flex flex-col items-center bg-red-100 hover:bg-red-200 p-4 rounded-xl border-2 border-red-300 w-full sm:w-1/3 transition-all hover:-translate-y-1">
                                        <span className="text-red-700 font-bold text-xl">ZOR</span>
                                        <span className="text-red-600 text-sm">Karƒ±≈üƒ±k ƒ∞≈ülemler</span>
                                        <div className="mt-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full">+3 Harf</div>
                                    </button>
                                </div>
                                 <div className="flex justify-center border-t pt-4 border-slate-100">
                                     <button 
                                        onClick={() => setGuessWordMode(true)}
                                        className="text-purple-600 font-bold hover:bg-purple-50 px-4 py-2 rounded-lg transition-colors flex items-center gap-2">
                                        üí° Kelimeyi Biliyorum!
                                    </button>
                                </div>
                            </div>
                        )}
                        
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>